<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Correção de Prova</title>

    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #111;
            color: white;
            font-family: Arial;
            height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        #container {
            display: flex;
            flex-direction: row;
            width: 95%;
            max-width: 900px;
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        #tela {
            flex: 2;
            border: 2px solid white;
            padding: 20px;
            border-radius: 15px;
            background: #222;
            text-align: center;
        }

        #painelInfo {
            flex: 1;
            border: 2px solid white;
            padding: 20px;
            border-radius: 15px;
            background: #333;
            font-size: 18px;
        }

        .alternativas {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .alternativaBtn {
            width: 18%;
            padding: 18px;
            background: #444;
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .alternativaBtn:active {
            transform: scale(0.92);
        }

        /* TELA PISCANDO */
        .flash-acerto {
            animation: flashGreen 1s;
        }
        .flash-erro {
            animation: flashRed 1s;
        }

        @keyframes flashGreen {
            0% { background: #0f0; }
            100% { background: #111; }
        }

        @keyframes flashRed {
            0% { background: #f00; }
            100% { background: #111; }
        }

        #voltar {
            margin-top: 20px;
            padding: 10px;
            font-size: 18px;
            background: #880000;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        @media(max-width: 700px) {
            #container {
                flex-direction: column;
                height: 95vh;
            }
        }
    </style>
</head>
<body>

<div id="container">
    <div id="tela">
        <h2>Escolha a cor da prova:</h2>
        <button onclick="selecionaProva('verde')">Verde</button>
        <button onclick="selecionaProva('branca')">Branca</button>
        <button onclick="selecionaProva('azul')">Azul</button>
        <button onclick="selecionaProva('amarela')">Amarela</button>
    </div>

    <div id="painelInfo">
        <h3>Última Questão</h3>
        <p id="infoQuestao">Ainda não respondeu nenhuma</p>
    </div>
</div>

<!-- SONS -->
<audio id="somAcerto" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="somErro" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
let gabaritos = {
    verde: {
        ingles: ["D","D","A","D","E"],
        espanhol: ["B","D","A","D","C"],
        resto: [
            "E","D","C","C","E","B","E","B","C","E",
            "C","A","E","B","C","E","D","B","A","B",
            "C","A","E","D","C","E","D","B","A","B",
            "A","B","D","E","B","B","C","B","A","A",
            "B","D","D","C","C","A","C","E","E","D",
            "C","A","D","B","D","E","C","A","D","E",
            "D","E","C","A","B","A","C","B","A","D",
            "A","B","B","C","B","C","E","A","E","E",
            "D","D","B","C","D","D","E","C","B","B","A"
        ]
    },
    branca: {
        ingles: ["E","A","D","D","D"],
        espanhol: ["D","C","B","A","D"],
        resto: [
            "C","E","E","D","C","A","E","B","C","A",
            "E","D","B","C","E","C","B","E","B","C",
            "B","A","B","A","C","E","D","B","D","E",
            "B","C","A","B","A","D","D","C","A","B",
            "A","D","B","D","E","E","D","E","C","E",
            "E","D","C","C","A","D","B","A","D","A",
            "B","B","C","A","B","A","C","B","B","A",
            "C","D","D","E","C","C","B","C","E","A",
            "E","E","D","D","B"
        ]
    },
    azul: {
        ingles: ["D","D","D","E","A"],
        espanhol: ["B","A","D","D","C"],
        resto: [
            "E","C","D","C","E","B","C","E","C","A",
            "E","D","A","E","B","C","B","C","B","E",
            "B","A","B","A","B","D","E","B","C","E",
            "D","A","B","C","A","B","A","D","D","C",
            "E","D","E","C","A","D","C","E","E","D",
            "C","A","D","B","D","E","B","B","A","C",
            "D","D","E","C","B","A","D","A","B","B",
            "C","A","B","A","C","E","E","D","D","B",
            "C","B","C","E","A"
        ]
    },
    amarela: {
        ingles: ["A","E","D","D","D"],
        espanhol: ["D","B","A","C","D"],
        resto: [
            "C","E","C","E","D","A","E","D","A","E",
            "B","C","B","E","B","C","E","C","B","D",
            "E","B","C","E","D","B","A","B","A","B",
            "C","D","D","C","C","A","A","B","B","A",
            "C","A","D","E","D","E","A","D","B","D",
            "E","C","E","E","D","C","C","D","D","E",
            "C","C","B","C","E","A","B","B","A","C",
            "A","B","A","C","E","E","D","D","B","B",
            "A","D","A","B","B"
        ]
    }
};

let provaSelecionada = null;
let gabaritoFinal = [];
let respostasUsuario = [];
let questao = 1;

function selecionaProva(cor) {
    provaSelecionada = cor;
    document.getElementById("tela").innerHTML = `
        <h2>Usar Inglês ou Espanhol nas 5 primeiras?</h2>
        <button onclick="definirIdioma('ingles')">Inglês</button>
        <button onclick="definirIdioma('espanhol')">Espanhol</button>
    `;
}

function definirIdioma(idioma) {
    let dados = gabaritos[provaSelecionada];
    gabaritoFinal = [...dados[idioma], ...dados.resto];
    iniciarResposta();
}

function iniciarResposta() {
    document.getElementById("tela").innerHTML = `
        <h2>Questão <span id="qNum">1</span> de ${gabaritoFinal.length}</h2>
        <p>Clique na tela ou digite A, B, C, D, E</p>

        <div class="alternativas">
            <button class="alternativaBtn" onclick="responder('A')">A</button>
            <button class="alternativaBtn" onclick="responder('B')">B</button>
            <button class="alternativaBtn" onclick="responder('C')">C</button>
            <button class="alternativaBtn" onclick="responder('D')">D</button>
            <button class="alternativaBtn" onclick="responder('E')">E</button>
        </div>

        <button id="voltar" onclick="voltarQuestao()">Voltar</button>
    `;
}

document.addEventListener("keydown", e => {
    let letra = e.key.toUpperCase();
    if (["A","B","C","D","E"].includes(letra)) responder(letra);
});

function responder(letra) {
    respostasUsuario.push(letra);

    let correta = gabaritoFinal[respostasUsuario.length - 1];
    let ultima = respostasUsuario.length;

    atualizarPainel(ultima, correta, letra);

    // som
    document.getElementById(letra === correta ? "somAcerto" : "somErro").play();

    // flash tela inteira
    document.body.classList.add(letra === correta ? "flash-acerto" : "flash-erro");
    setTimeout(() => document.body.classList.remove("flash-acerto", "flash-erro"), 1000);

    if (ultima === gabaritoFinal.length) {
        finalizar();
    } else {
        questao++;
        document.getElementById("qNum").innerText = questao;
    }
}

function atualizarPainel(numero, correta, marcada) {
    document.getElementById("infoQuestao").innerHTML = `
        Questão: <strong>${numero}</strong><br>
        Correta: <strong>${correta || "-"}</strong><br>
        Você marcou: <strong>${marcada}</strong>
    `;
}

function voltarQuestao() {
    if (respostasUsuario.length > 0) {
        respostasUsuario.pop();
        questao--;
        document.getElementById("qNum").innerText = questao;
        atualizarPainel("—", "-", "-");
    }
}

function finalizar() {
    let acertos = respostasUsuario.filter((r, i) => r === gabaritoFinal[i]).length;

    document.getElementById("tela").innerHTML = `
        <h2>Resultado Final</h2>
        <p>Acertos: <strong>${acertos}</strong> de <strong>${gabaritoFinal.length}</strong></p>
        <button onclick="location.reload()">Recomeçar</button>
    `;
}
</script>

</body>
</html>
