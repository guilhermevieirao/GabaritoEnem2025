<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corre√ß√£o de Prova</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- OVERLAY PARA EFEITO FLASH -->
    <div id="flashOverlay" class="flash-overlay"></div>

    <!-- EASTER EGG OVERLAY -->
    <div id="easterEggOverlay" class="easter-egg-overlay">
        <img src="easteregg.jpg" alt="Easter Egg" class="easter-egg-image">
    </div>

    <!-- EASTER EGG - √çCONE NO CANTO DA TELA -->
    <div id="easterEggIcon" class="easter-egg-icon-fixed" onclick="mostrarEasterEgg()">
        <i class="bi bi-person-arms-up"></i>
    </div>

    <!-- SWITCHES DE CONFIGURA√á√ÉO -->
    <div class="switch-container">
        <div class="d-flex align-items-center gap-3">
            <div class="d-flex align-items-center gap-2">
                <i class="bi bi-volume-up-fill"></i>
                <label class="custom-switch">
                    <input type="checkbox" id="switchAudio" checked>
                    <span class="switch-slider"></span>
                </label>
            </div>
            <div class="d-flex align-items-center gap-2">
                <i class="bi bi-palette-fill"></i>
                <label class="custom-switch">
                    <input type="checkbox" id="switchEfeitos" checked>
                    <span class="switch-slider"></span>
                </label>
            </div>
        </div>
    </div>

    <!-- CONTAINER PRINCIPAL -->
    <div class="main-container">
        <div class="container-fluid">
            <div class="row justify-content-center">
                <!-- TELA PRINCIPAL -->
                <div class="col-lg-8 col-xl-7">
                    <div class="card custom-card p-4 text-center fade-in">
                        <!-- TELA 1: SELE√á√ÉO DE ANO -->
                        <div id="telaAno" class="tela-secao">
                            <h2 class="mb-4">
                                <i class="bi bi-calendar-range me-2"></i>
                                Sistema de Corre√ß√£o de Provas ENEM
                            </h2>
                            <div class="row g-3 justify-content-center mb-4">
                                <div class="col-md-8">
                                    <button class="btn btn-sucesso btn-custom w-100 py-4" onclick="selecionarAno(2025)">
                                        <div class="mb-2">
                                            <i class="bi bi-calendar-check-fill fs-1"></i>
                                        </div>
                                        <h4 class="mb-1">ENEM 2025</h4>
                                        <small>Gabaritos Dispon√≠veis</small>
                                    </button>
                                </div>
                            </div>
                            <div class="row g-3 justify-content-center mb-4">
                                <div class="col-md-6">
                                    <button class="btn btn-custom w-100 py-2" onclick="selecionarAno('anteriores')" 
                                            style="background: #555 !important; border-color: #555 !important; opacity: 0.7;">
                                        <i class="bi bi-archive-fill me-2"></i>
                                        <span>Edi√ß√µes Anteriores</span>
                                        <small class="d-block mt-1" style="color: #ff4444 !important; font-weight: bold;">
                                            <i class="bi bi-hourglass-split me-1"></i>Em Breve
                                        </small>
                                    </button>
                                </div>
                            </div>
                            <hr class="my-4" style="border-color: #666;">
                            <div class="row justify-content-center">
                                <div class="col-md-5">
                                    <button class="btn btn-idioma btn-custom w-100 py-3" onclick="iniciarProvaPersonalizada()">
                                        <i class="bi bi-gear-fill me-2"></i>Prova Personalizada
                                    </button>
                                </div>
                                <div class="col-md-5">
                                    <button class="btn btn-sucesso btn-custom w-100 py-3" onclick="abrirProvasSalvas()">
                                        <i class="bi bi-folder-fill me-2"></i>Provas Salvas
                                    </button>
                                </div>
                            </div>
                            <div class="row justify-content-center mt-3">
                                <div class="col-md-5">
                                    <button id="btnResultadoDia1" class="btn btn-info btn-custom w-100 py-3" onclick="abrirResultadoSalvo(1)" style="display: none;">
                                        <i class="bi bi-clipboard-data-fill me-2"></i>Resultado Dia 1
                                    </button>
                                </div>
                                <div class="col-md-5">
                                    <button id="btnResultadoDia2" class="btn btn-info btn-custom w-100 py-3" onclick="abrirResultadoSalvo(2)" style="display: none;">
                                        <i class="bi bi-clipboard-data-fill me-2"></i>Resultado Dia 2
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- TELA 2: SELE√á√ÉO DE DIA -->
                        <div id="telaDia" class="tela-secao hidden">
                            <h2 class="mb-4">
                                <i class="bi bi-calendar-check me-2"></i>
                                Escolha o dia da prova do ENEM 2025
                            </h2>
                            <div class="row g-3 justify-content-center mb-4">
                                <div class="col-md-5">
                                    <button class="btn btn-sucesso btn-custom w-100 py-4" onclick="selecionarDia(1)">
                                        <div class="mb-2">
                                            <i class="bi bi-1-circle-fill fs-1"></i>
                                        </div>
                                        <h5 class="mb-1">Primeiro Dia</h5>
                                        <small>Linguagens e Ci√™ncias Humanas</small>
                                    </button>
                                </div>
                                <div class="col-md-5">
                                    <button class="btn btn-sucesso btn-custom w-100 py-4" onclick="selecionarDia(2)">
                                        <div class="mb-2">
                                            <i class="bi bi-2-circle-fill fs-1"></i>
                                        </div>
                                        <h5 class="mb-1">Segundo Dia</h5>
                                        <small>Matem√°tica e Ci√™ncias da Natureza</small>
                                    </button>
                                </div>
                            </div>
                            <div class="text-center">
                                <button onclick="voltarAno()" class="btn btn-voltar btn-custom px-4">
                                    <i class="bi bi-arrow-left me-2"></i>Voltar
                                </button>
                            </div>
                        </div>

                        <!-- TELA 3: SELE√á√ÉO DE COR -->
                        <div id="telaCor" class="tela-secao hidden">
                            <h2 class="mb-4">
                                <i class="bi bi-palette2 me-2"></i>
                                Escolha a cor da prova
                            </h2>
                            <div class="row g-3 mb-4">
                                <div class="col-6 col-md-3">
                                    <button id="btnVerde" class="btn btn-verde btn-custom w-100 py-3" onclick="selecionaProva('verde')">
                                        Verde
                                    </button>
                                </div>
                                <div class="col-6 col-md-3">
                                    <button id="btnBranca" class="btn btn-branca btn-custom w-100 py-3" onclick="selecionaProva('branca')">
                                        Branca
                                    </button>
                                </div>
                                <div class="col-6 col-md-3">
                                    <button id="btnAzul" class="btn btn-azul btn-custom w-100 py-3" onclick="selecionaProva('azul')">
                                        Azul
                                    </button>
                                </div>
                                <div class="col-6 col-md-3">
                                    <button id="btnAmarela" class="btn btn-amarela btn-custom w-100 py-3" onclick="selecionaProva('amarela')">
                                        Amarela
                                    </button>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <button onclick="voltarDia()" class="btn btn-voltar btn-custom px-4">
                                    <i class="bi bi-arrow-left me-2"></i>Voltar
                                </button>
                            </div>
                        </div>

                        <!-- TELA 4: SELE√á√ÉO DE IDIOMA -->
                        <div id="telaIdioma" class="tela-secao hidden">
                            <h2 class="mb-4">
                                <i class="bi bi-translate me-2"></i>
                                Escolha o idioma das 5 primeiras quest√µes
                            </h2>
                            <div class="row g-3 justify-content-center mb-4">
                                <div class="col-md-4">
                                    <button class="btn btn-idioma btn-custom w-100 py-3" onclick="definirIdioma('ingles')">
                                        üá∫üá∏ Ingl√™s
                                    </button>
                                </div>
                                <div class="col-md-4">
                                    <button class="btn btn-idioma btn-custom w-100 py-3" onclick="definirIdioma('espanhol')">
                                        üá™üá∏ Espanhol
                                    </button>
                                </div>
                            </div>
                            <div class="text-center">
                                <button onclick="voltarCor()" class="btn btn-voltar btn-custom px-4">
                                    <i class="bi bi-arrow-left me-2"></i>Voltar
                                </button>
                            </div>
                        </div>

                        <!-- TELA 5: QUEST√ïES -->
                        <div id="telaQuestoes" class="tela-secao hidden">
                            <h2 class="mb-3">
                                <i class="bi bi-question-circle-fill me-2"></i>
                                Quest√£o <span id="qNum" class="text-info">1</span> de <span id="totalQuestoes" class="text-info">90</span>
                            </h2>
                            <p class="mb-4" style="color: #ccc !important;">
                                <i class="bi bi-mouse me-1"></i>Clique nos bot√µes ou use as teclas A, B, C, D, E
                            </p>
                            <div class="row g-2 mb-4">
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="responder('A')">A</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="responder('B')">B</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="responder('C')">C</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="responder('D')">D</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="responder('E')">E</button>
                                </div>
                            </div>
                            <div class="d-flex gap-2 justify-content-center">
                                <button class="btn btn-inicio btn-custom px-4" onclick="voltarInicio()">
                                    <i class="bi bi-house-fill me-2"></i>In√≠cio
                                </button>
                                <button class="btn btn-voltar btn-custom px-4" onclick="voltarQuestao()">
                                    <i class="bi bi-arrow-left me-2"></i>Voltar Quest√£o
                                </button>
                            </div>
                            <div class="text-center mt-3">
                                <button class="btn btn-sm" style="background: transparent; color: #888; border: 1px solid #555; padding: 0.4rem 0.8rem; font-size: 0.85rem;" onclick="abrirInsercaoRespostas()" title="Inserir respostas como texto">
                                    <i class="bi bi-file-text-fill me-1"></i>Inserir Respostas
                                </button>
                            </div>
                        </div>

                        <!-- TELA 6: RESULTADO -->
                        <div id="telaResultado" class="tela-secao hidden">
                            <h2 class="mb-3">
                                <i class="bi bi-trophy-fill me-2"></i>
                                Resultado Final
                            </h2>
                            <div class="mb-4">
                                <p class="fs-5 mb-2" style="color: white !important;">
                                    Acertos: <span id="numAcertos" class="text-success fw-bold">0</span> 
                                    de <span id="totalFinal" class="fw-bold" style="color: white !important;">90</span>
                                </p>
                                <p style="color: #ccc; font-size: 0.95rem;">
                                    Percentual Total: <span id="percentualTotal" class="text-info fw-bold">0%</span>
                                </p>
                            </div>
                            
                            <!-- CONTADORES POR √ÅREA -->
                            <div id="contadoresPorArea" class="mb-4" style="display: none;">
                                <div class="row g-3 mb-3 justify-content-center">
                                    <div class="col-md-4" id="cardLinguaEstrangeira">
                                        <div class="card" style="background: var(--bg-tertiary); border: 1px solid var(--border-color);">
                                            <div class="card-body text-center">
                                                <i class="bi bi-translate text-info fs-4 mb-2"></i>
                                                <h6 style="color: white;">L√≠ngua Estrangeira</h6>
                                                <span id="acertosLinguaEstrangeira" class="text-success fw-bold fs-5">0</span>
                                                <span style="color: #ccc;"> de 5</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card" style="background: var(--bg-tertiary); border: 1px solid var(--border-color);">
                                            <div class="card-body text-center">
                                                <i id="iconArea1" class="bi bi-book-fill text-primary fs-4 mb-2"></i>
                                                <h6 style="color: white;" id="labelArea1">Linguagens</h6>
                                                <span id="acertosLinguagens" class="text-success fw-bold fs-5">0</span>
                                                <span style="color: #ccc;"> de <span id="totalArea1">40</span></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card" style="background: var(--bg-tertiary); border: 1px solid var(--border-color);">
                                            <div class="card-body text-center">
                                                <i id="iconArea2" class="bi bi-people-fill text-warning fs-4 mb-2"></i>
                                                <h6 style="color: white;" id="labelArea2">Humanas</h6>
                                                <span id="acertosHumanas" class="text-success fw-bold fs-5">0</span>
                                                <span style="color: #ccc;"> de <span id="totalArea2">45</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="table-responsive mb-4" style="max-height: 50vh;">
                                <table id="tabela" class="table table-sm"></table>
                            </div>
                            <div class="d-flex gap-2 justify-content-center flex-wrap">
                                <button onclick="salvarResultadoPDF()" class="btn btn-info btn-custom px-4">
                                    <i class="bi bi-file-earmark-pdf-fill me-2"></i>Salvar PDF
                                </button>
                                <button onclick="voltarInicio()" class="btn btn-inicio btn-custom px-4">
                                    <i class="bi bi-house-fill me-2"></i>In√≠cio
                                </button>
                                <button onclick="recomecarMesmaProva()" class="btn btn-sucesso btn-custom px-4">
                                    <i class="bi bi-arrow-clockwise me-2"></i>Recome√ßar
                                </button>
                            </div>
                        </div>

                        <!-- TELA 7: CONFIGURAR PROVA PERSONALIZADA -->
                        <div id="telaPersonalizadaConfig" class="tela-secao hidden">
                            <h2 class="mb-4">
                                <i class="bi bi-gear-fill me-2"></i>
                                Configurar Prova Personalizada
                            </h2>
                            <div class="row justify-content-center">
                                <div class="col-md-8">
                                    <div class="mb-4">
                                        <label class="form-label" style="color: white !important;">M√©todo de cria√ß√£o:</label>
                                        <div class="mb-3">
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="radio" name="metodoGabarito" id="metodoManual" value="manual" checked>
                                                <label class="form-check-label" for="metodoManual" style="color: white !important;">
                                                    Manual (quest√£o por quest√£o)
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="metodoGabarito" id="metodoTexto" value="texto">
                                                <label class="form-check-label" for="metodoTexto" style="color: white !important;">
                                                    Inserir como texto (ex: ABCDEABCDE...)
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- M√âTODO MANUAL -->
                                    <div id="configManual" class="mb-4">
                                        <label class="form-label" style="color: white !important;">N√∫mero de quest√µes:</label>
                                        <input type="number" id="numQuestoesPersonalizada" class="form-control" 
                                               min="1" max="200" value="20" 
                                               style="background: var(--bg-tertiary); color: white; border: 1px solid var(--border-color);">
                                    </div>
                                    
                                    <!-- M√âTODO TEXTO -->
                                    <div id="configTexto" class="mb-4 d-none">
                                        <label class="form-label" style="color: white !important;">Gabarito (apenas letras A, B, C, D, E):</label>
                                        <textarea id="gabaritoTexto" class="form-control" rows="4" 
                                                  placeholder="Digite o gabarito, ex: ABCDEABCDEA ou abcde abcde a..."
                                                  style="background: var(--bg-tertiary); color: white; border: 1px solid var(--border-color); font-family: monospace;"></textarea>
                                        <small class="text-muted">Espa√ßos e quebras de linha ser√£o ignorados. Apenas letras A-E s√£o aceitas.</small>
                                    </div>
                                    
                                    <div class="d-flex gap-2 justify-content-center">
                                        <button onclick="voltarInicio()" class="btn btn-voltar btn-custom px-4">
                                            <i class="bi bi-arrow-left me-2"></i>Voltar
                                        </button>
                                        <button onclick="processarProvaPersonalizada()" class="btn btn-sucesso btn-custom px-4">
                                            <i class="bi bi-check-circle me-2"></i>Continuar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- TELA 8: DEFINIR GABARITO PERSONALIZADO -->
                        <div id="telaDefinirGabarito" class="tela-secao hidden">
                            <h2 class="mb-3">
                                <i class="bi bi-pencil-fill me-2"></i>
                                Definir Gabarito - Quest√£o <span id="questaoGabarito">1</span> de <span id="totalGabarito">20</span>
                            </h2>
                            <p class="mb-4" style="color: #ccc !important;">
                                Escolha a resposta correta para esta quest√£o:
                            </p>
                            <p class="mb-3" style="color: #888 !important; font-size: 0.9rem;">
                                üí° Dica: Use as teclas A, B, C, D, E ou clique nos bot√µes
                            </p>
                            <div class="row g-2 mb-4">
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="definirResposta('A')">A</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="definirResposta('B')">B</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="definirResposta('C')">C</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="definirResposta('D')">D</button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-alternativa btn-custom w-100" onclick="definirResposta('E')">E</button>
                                </div>
                            </div>
                            <div class="d-flex gap-2 justify-content-center">
                                <button onclick="voltarGabarito()" class="btn btn-voltar btn-custom px-4">
                                    <i class="bi bi-arrow-left me-2"></i>Voltar
                                </button>
                                <button onclick="voltarInicio()" class="btn btn-inicio btn-custom px-4">
                                    <i class="bi bi-house-fill me-2"></i>In√≠cio
                                </button>
                            </div>
                        </div>

                        <!-- TELA 9: PROVAS SALVAS -->
                        <div id="telaProvasSalvas" class="tela-secao hidden">
                            <h2 class="mb-4">
                                <i class="bi bi-folder-fill me-2"></i>
                                Provas Salvas
                            </h2>
                            <div class="row justify-content-center">
                                <div class="col-md-8">
                                    <div id="listaProvasSalvas" class="mb-4">
                                        <!-- Lista ser√° preenchida dinamicamente -->
                                    </div>
                                    <div class="text-center">
                                        <div class="d-flex gap-2 justify-content-center">
                                            <button onclick="voltarInicio()" class="btn btn-voltar btn-custom px-4">
                                                <i class="bi bi-arrow-left me-2"></i>Voltar ao In√≠cio
                                            </button>
                                            <button onclick="limparTodasProvas()" class="btn btn-erro btn-custom px-4">
                                                <i class="bi bi-trash3-fill me-2"></i>Limpar Todas
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAINEL LATERAL DE INFORMA√á√ïES -->
                <div class="col-lg-4 col-xl-3 d-none" id="painelContainer">
                    <div id="painelInfo" class="card custom-card info-panel p-3">
                        <h5 class="mb-3">
                            <i class="bi bi-info-circle-fill me-2"></i>
                            √öltima Quest√£o
                        </h5>
                        <div id="infoQuestao" style="color: white !important;">
                            Ainda n√£o respondeu nenhuma
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SONS -->
    <audio id="somAcerto" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
    <audio id="somErro" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

    <!-- MODAL INSERIR RESPOSTAS -->
    <div id="modalInsercaoRespostas" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 15px; padding: 30px; max-width: 500px; width: 90%; color: white;">
            <h4 class="mb-3">
                <i class="bi bi-file-text-fill me-2"></i>Inserir Respostas em Lote
            </h4>
            <p style="color: #ccc; margin-bottom: 15px; font-size: 0.9rem;">
                Digite as respostas como uma sequ√™ncia cont√≠nua (ex: ABCDEABCDEA...)<br>
                Espa√ßos e quebras de linha ser√£o ignorados. Use apenas A, B, C, D, E.
            </p>
            <textarea id="textoRespostas" style="width: 100%; height: 120px; background: var(--bg-tertiary); color: white; border: 1px solid var(--border-color); border-radius: 8px; padding: 10px; font-family: monospace; resize: vertical;" placeholder="ABCDEABCDEA..."></textarea>
            <p style="color: #999; font-size: 0.85rem; margin-top: 10px;">
                <strong>Aten√ß√£o:</strong> Isso sobrescrever√° todas as suas respostas atuais.
            </p>
            <div class="d-flex gap-2 justify-content-center mt-4">
                <button class="btn btn-voltar" style="background: var(--danger); color: white; border: none; padding: 0.5rem 1.2rem; border-radius: 8px; cursor: pointer;" onclick="fecharInsercaoRespostas()">
                    Cancelar
                </button>
                <button class="btn btn-sucesso" style="background: var(--success); color: white; border: none; padding: 0.5rem 1.2rem; border-radius: 8px; cursor: pointer;" onclick="inserirRespostasEmLote()">
                    Inserir Respostas
                </button>
            </div>
        </div>
    </div>

    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>